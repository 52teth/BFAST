\#  For more details on the layout of this page and how to process it
\#  to create PDF and HTML, see the comment header for bfast.1
\#
\#
\# .TP
\# \fB\-I\fR, \fB\-\-ignore\fR=\fIPATTERN\fR
\# do not list implied entries matching shell PATTERN
\#
\" Turn off justification and hyphenation
.na
.hy 0
.TH bpreprocess 1 "Jul 01, 2008" "version 0.1.1" "UCLA bfast"
.SH NAME
bpreprocess \- pre-computes suitable indexes and genomes that can be re-used in subsequent alignment runs.
.SH SYNOPSIS
.P
.fam C
.nf
bpreprocess
	[\fB\-r\fR \fIFILENAME\fR] 	[\fB\-\-rgFileName=\fIFILENAME\fR]
	[\fB\-i\fR \fIFILENAME\fR] 	[\fB\-\-indexLayoutFileName=\fIFILENAME\fR]
	[\fB\-a\fR] 		[\fB\-\-colorSpace\fR]
	[\fB\-A\fR \fIINTEGER\fR] 	[\fB\-\-algorithm=\fIINTEGER\fR]
	[\fB\-s\fR \fIINTEGER\fR] 	[\fB\-\-startChr=\fIINTEGER\fR]
	[\fB\-S\fR \fIINTEGER\fR] 	[\fB\-\-startPos=\fIINTEGER\fR]
	[\fB\-e\fR \fIINTEGER\fR] 	[\fB\-\-endChr=\fIINTEGER\fR]
	[\fB\-E\fR \fIINTEGER\fR] 	[\fB\-\-endPos=\fIINTEGER\fR]
	[\fB\-R\fR]			[\fB\-\-repeatMasker\fR]
	[\fB\-n\fR \fIINTEGER\fR] 	[\fB\-\-numThreads=\fIINTEGER\fR]
	[\fB\-o\fR \fISTRING\fR] 	[\fB\-\-outputID=\fISTRING\fR]
	[\fB\-d\fR \fIDIRECTORY\fR] [\fB\-\-outputDir=\fIDIRECTORY\fR]
	[\fB\-t\fR] 		[\fB\-\-timing\fR]
	[\fB\-p\fR] 		[\fB\-\-Parameters\fR]
	[\fB\-h\fR] 		[\fB\-\-Help\fR]
.fi
.fam
.
.SH DESCRIPTION
.B bpreprocess
is the first of four programs in the bfast system.
.
.P
There are two types of output files generated by this program.
The first type is a binary format for the reference genome.
The second type is an index used in subsequent searches by
\fBbmatches\fR.
.
.P
The first step is to convert the reference genome to bfast binary format.
This is essential for fast loading of the reference genome and is accomplished by using option \fB\-a 1\fR.
The \fB\-r\fR option should specify a file that contains the reference genome list.
For more information on this file format please see 
.BR bfast(1) "."
.
.P
To generate an index (\fB\-a 0\fR), the reference genome sequence must be given (see \fB\-r\fR).
The number of indexes to be generated and their respective layouts must also be given (see \fB\-i\fR).
The index does not have to range over the whole-genome, and can be narrowed to a range be using options \fB\-s\fR, \fB\-S\fR, \fB\-e\fR and \fB\-E\fR to specify start chromosome and position as well as end chromosome and position for the range.
If you are using a multi-core and/or a multi-processor machine, it is beneficial to specify the number of threads (see \fB\-n\fR) to match the number of independent processing units as to speed up the generating time.
The indexes are stored in binary format to reduce disk space as well as speed up subsequent loading time.
To ignore lower case bases, which correspond to RepeatMasker sequence, use the \fB\-R\fR option.
.
.SH OPTIONS
.TP 4
\fB\-r\fR \fIFILENAME\fR, \fB\-\-rgFileName=\fIFILENAME\fR
The file specified contains the reference genome.
If \fB\-a 0\fR is used, then the file name should contain the bfast binary reference genome file.
If \fB\-a 1\fR is used, then the file name should contain the reference genome file list.  
For more information on the format of the latter file, please see
.BR bfast(1) "."
.
.TP 4
\fB\-i\fR \fIFILENAME\fR, \fB\-\-indexLayoutFileName=\fIFILENAME\fR
The file specified will contain the layout for each index that you wish to generate.
.
.TP 4
\fB\-a\fR \fIINTEGER\fR, \fB\-\-algorithm=\fIINTEGER\fR
This specifies what should be pre-computed.
If \fB\-a 0\fR is given, we will create an index according to the layouts (\fB\-i\fR) given.
If \fB\-a 1\fR is given, we will create binary files for the reference genome.
\fB\-a 1\fR is not yet implemented.
.
.TP 4
\fB\-A\fR, \fB\-\-colorSpace\fR
Specifies that the index should be created in color space.
This option affects only the index creation (\fB\-a\fR).
.
.TP 4
\fB\-s\fR \fIINTEGER\fR, \fB\-\-startChr=\fIINTEGER\fR
Specifies the beginning chromosome range to consider when building the indexes.
.
.TP 4
\fB\-S\fR \fIINTEGER\fR, \fB\-\-startPos=\fIINTEGER\fR
Specifies the beginning position range to consider when building the indexes.
.
.TP 4
\fB\-e\fR \fIINTEGER\fR, \fB\-\-endChr=\fIINTEGER\fR
Specifies the end chromosome range to consider when building the indexes.
.
.TP 4
\fB\-E\fR \fIINTEGER\fR, \fB\-\-endPos=\fIINTEGER\fR
Specifies the end position range to consider when building the indexes.
.
.TP 4
\fB\-R\fR, \fB\-\-RepeatMasker\fR
Ignores lower case bases when creating the indexes (\fB-a 0\fR).
This typically corresponds to RepeatMasker sequence.
.
.TP 4
\fB\-n\fR \fIINTEGER\fR, \fB\-\-numThreads=\fIINTEGER\fR
Specifies the number of threads to create.
Sorting of the index is required for fast look-up.
The speed of the sort will increase by a factor of \fB1/n\fR.
.
.TP 4
\fB\-o\fR \fISTRING\fR, \fB\-\-outputID=\fISTRING\fR
Specifies a string to include when naming the output files.
.
.TP 4
\fB\-d\fR \fIDIRECTORY\fR, \fB\-\-outputDir=\fIDIRECTORY\fR
Specifies the directory in which to output.
.
.TP 4
\fB\-t\fR, \fB\-\-timing\fR
Output timing information for the execution of the program.
.
.TP 4
\fB\-p\fR, \fB\-\-Parameters\fR
Prints the program parameters but does not execute.
.
.TP 4
\fB\-h\fR, \fB\-\-Help\fR
Prints the help message.
.
.SH KNOWN ISSUES
Please see the
.BR bfast (1)
manpage.
.
.SH AUTHORS
.P
Nils Homer <nhomer@cs.ucla.edu.org>
.br
Barry Merriman <barrym@ucla.edu>
.br
Stanley F. Nelson <snelson@ucla.edu>
.
.SH SEE ALSO
.P
.BR bfast "(1), "
.BR bmatches "(1), "
.BR balign "(1), "
.BR bpostprocess "(1)."
.
.SH COPYRIGHT
.P
bfast is copyright 2008 by The University of California - Los
Angeles.  All rights reserved.  This License is limited to, and you
may use the Software solely for, your own internal and non-commercial
use for academic and research purposes.  Without limiting the foregoing,
you may not use the Software as part of, or in any way in connection
with the production, marketing, sale or support of any commercial
product or service.  For commercial use, please contact
nhomer@cs.ucla.edu.org.  By installing this Software you are agreeing to
the terms of the LICENSE file distributed with this software.
.
.P
In any work or product derived from the use of this Software, proper
attribution of the authors as the source of the software or data must
be made.  
Please reference the original BFAST paper PMID<to be published>.
In addition, the following URL should be cited:
.
.P
.I <http://genome.ucla.edu/bfast>
